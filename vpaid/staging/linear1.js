/* VidAd VPAID v1.2.0 #df4eb9f */
/*! Raven.js 3.17.0 (d5678cb) | github.com/getsentry/raven-js */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Raven=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){this.name="RavenConfigError",this.message=a}d.prototype=new Error,d.prototype.constructor=d,b.exports=d},{}],2:[function(a,b,c){"use strict";var d=function(a,b,c){var d=a[b],e=a;if(b in a){var f="warn"===b?"warning":b;a[b]=function(){var a=[].slice.call(arguments),b=""+a.join(" "),g={level:f,logger:"console",extra:{arguments:a}};c&&c(b,g),d&&Function.prototype.apply.call(d,e,a)}}};b.exports={wrapMethod:d}},{}],3:[function(a,b,c){(function(c){"use strict";function d(){return+new Date}function e(a,b){return h(b)?function(c){return b(c,a)}:b}function f(){this.a=!("object"!=typeof JSON||!JSON.stringify),this.b=!g(J),this.c=!g(K),this.d=null,this.e=null,this.f=null,this.g=null,this.h=null,this.i=null,this.j={},this.k={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this.l=0,this.m=!1,this.n=Error.stackTraceLimit,this.o=I.console||{},this.p={},this.q=[],this.r=d(),this.s=[],this.t=[],this.u=null,this.v=I.location,this.w=this.v&&this.v.href,this.x();for(var a in this.o)this.p[a]=this.o[a]}function g(a){return void 0===a}function h(a){return"function"==typeof a}function i(a){return"[object String]"===L.toString.call(a)}function j(a){for(var b in a)return!1;return!0}function k(a,b){var c,d;if(g(a.length))for(c in a)o(a,c)&&b.call(null,c,a[c]);else if(d=a.length)for(c=0;c<d;c++)b.call(null,c,a[c])}function l(a,b){return b?(k(b,function(b,c){a[b]=c}),a):a}function m(a){return!!Object.isFrozen&&Object.isFrozen(a)}function n(a,b){return!b||a.length<=b?a:a.substr(0,b)+"…"}function o(a,b){return L.hasOwnProperty.call(a,b)}function p(a){for(var b,c=[],d=0,e=a.length;d<e;d++)b=a[d],i(b)?c.push(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")}function q(a){var b=[];return k(a,function(a,c){b.push(encodeURIComponent(a)+"="+encodeURIComponent(c))}),b.join("&")}function r(a){var b=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!b)return{};var c=b[6]||"",d=b[8]||"";return{protocol:b[2],host:b[4],path:b[5],relative:b[5]+c+d}}function s(){var a=I.crypto||I.msCrypto;if(!g(a)&&a.getRandomValues){var b=new Uint16Array(8);a.getRandomValues(b),b[3]=4095&b[3]|16384,b[4]=16383&b[4]|32768;var c=function(a){for(var b=a.toString(16);b.length<4;)b="0"+b;return b};return c(b[0])+c(b[1])+c(b[2])+c(b[3])+c(b[4])+c(b[5])+c(b[6])+c(b[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function t(a){for(var b,c=5,d=80,e=[],f=0,g=0,h=" > ",i=h.length;a&&f++<c&&(b=u(a),!("html"===b||f>1&&g+e.length*i+b.length>=d));)e.push(b),g+=b.length,a=a.parentNode;return e.reverse().join(h)}function u(a){var b,c,d,e,f,g=[];if(!a||!a.tagName)return"";if(g.push(a.tagName.toLowerCase()),a.id&&g.push("#"+a.id),b=a.className,b&&i(b))for(c=b.split(/\s+/),f=0;f<c.length;f++)g.push("."+c[f]);var h=["type","name","title","alt"];for(f=0;f<h.length;f++)d=h[f],e=a.getAttribute(d),e&&g.push("["+d+'="'+e+'"]');return g.join("")}function v(a,b){return!!(!!a^!!b)}function w(a,b){return!v(a,b)&&(a=a.values[0],b=b.values[0],a.type===b.type&&a.value===b.value&&x(a.stacktrace,b.stacktrace))}function x(a,b){if(v(a,b))return!1;var c=a.frames,d=b.frames;if(c.length!==d.length)return!1;for(var e,f,g=0;g<c.length;g++)if(e=c[g],f=d[g],e.filename!==f.filename||e.lineno!==f.lineno||e.colno!==f.colno||e["function"]!==f["function"])return!1;return!0}function y(a,b,c,d){var e=a[b];a[b]=c(e),d&&d.push([a,b,e])}var z=a(6),A=a(7),B=a(1),C=a(5),D=C.isError,E=C.isObject,F=a(2).wrapMethod,G="source protocol user pass host port path".split(" "),H=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,I="undefined"!=typeof window?window:"undefined"!=typeof c?c:"undefined"!=typeof self?self:{},J=I.document,K=I.navigator;f.prototype={VERSION:"3.17.0",debug:!1,TraceKit:z,config:function(a,b){var c=this;if(c.g)return this.y("error","Error: Raven has already been configured"),c;if(!a)return c;var d=c.k;b&&k(b,function(a,b){"tags"===a||"extra"===a||"user"===a?c.j[a]=b:d[a]=b}),c.setDSN(a),d.ignoreErrors.push(/^Script error\.?$/),d.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),d.ignoreErrors=p(d.ignoreErrors),d.ignoreUrls=!!d.ignoreUrls.length&&p(d.ignoreUrls),d.whitelistUrls=!!d.whitelistUrls.length&&p(d.whitelistUrls),d.includePaths=p(d.includePaths),d.maxBreadcrumbs=Math.max(0,Math.min(d.maxBreadcrumbs||100,100));var e={xhr:!0,console:!0,dom:!0,location:!0},f=d.autoBreadcrumbs;"[object Object]"==={}.toString.call(f)?f=l(e,f):f!==!1&&(f=e),d.autoBreadcrumbs=f;var g={tryCatch:!0},h=d.instrument;return"[object Object]"==={}.toString.call(h)?h=l(g,h):h!==!1&&(h=g),d.instrument=h,z.collectWindowErrors=!!d.collectWindowErrors,c},install:function(){var a=this;return a.isSetup()&&!a.m&&(z.report.subscribe(function(){a.z.apply(a,arguments)}),a.k.instrument&&a.k.instrument.tryCatch&&a.A(),a.k.autoBreadcrumbs&&a.B(),a.C(),a.m=!0),Error.stackTraceLimit=a.k.stackTraceLimit,this},setDSN:function(a){var b=this,c=b.D(a),d=c.path.lastIndexOf("/"),e=c.path.substr(1,d);b.E=a,b.h=c.user,b.F=c.pass&&c.pass.substr(1),b.i=c.path.substr(d+1),b.g=b.G(c),b.H=b.g+"/"+e+"api/"+b.i+"/store/",this.x()},context:function(a,b,c){return h(a)&&(c=b||[],b=a,a=void 0),this.wrap(a,b).apply(this,c)},wrap:function(a,b,c){function d(){var d=[],f=arguments.length,g=!a||a&&a.deep!==!1;for(c&&h(c)&&c.apply(this,arguments);f--;)d[f]=g?e.wrap(a,arguments[f]):arguments[f];try{return b.apply(this,d)}catch(i){throw e.I(),e.captureException(i,a),i}}var e=this;if(g(b)&&!h(a))return a;if(h(a)&&(b=a,a=void 0),!h(b))return b;try{if(b.J)return b;if(b.K)return b.K}catch(f){return b}for(var i in b)o(b,i)&&(d[i]=b[i]);return d.prototype=b.prototype,b.K=d,d.J=!0,d.L=b,d},uninstall:function(){return z.report.uninstall(),this.M(),Error.stackTraceLimit=this.n,this.m=!1,this},captureException:function(a,b){if(!D(a))return this.captureMessage(a,l({trimHeadFrames:1,stacktrace:!0},b));this.d=a;try{var c=z.computeStackTrace(a);this.N(c,b)}catch(d){if(a!==d)throw d}return this},captureMessage:function(a,b){if(!this.k.ignoreErrors.test||!this.k.ignoreErrors.test(a)){b=b||{};var c=l({message:a+""},b);if(this.k.stacktrace||b&&b.stacktrace){var d;try{throw new Error(a)}catch(e){d=e}d.name=null,b=l({fingerprint:a,trimHeadFrames:(b.trimHeadFrames||0)+1},b);var f=z.computeStackTrace(d),g=this.O(f,b);c.stacktrace={frames:g.reverse()}}return this.P(c),this}},captureBreadcrumb:function(a){var b=l({timestamp:d()/1e3},a);if(h(this.k.breadcrumbCallback)){var c=this.k.breadcrumbCallback(b);if(E(c)&&!j(c))b=c;else if(c===!1)return this}return this.t.push(b),this.t.length>this.k.maxBreadcrumbs&&this.t.shift(),this},addPlugin:function(a){var b=[].slice.call(arguments,1);return this.q.push([a,b]),this.m&&this.C(),this},setUserContext:function(a){return this.j.user=a,this},setExtraContext:function(a){return this.Q("extra",a),this},setTagsContext:function(a){return this.Q("tags",a),this},clearContext:function(){return this.j={},this},getContext:function(){return JSON.parse(A(this.j))},setEnvironment:function(a){return this.k.environment=a,this},setRelease:function(a){return this.k.release=a,this},setDataCallback:function(a){var b=this.k.dataCallback;return this.k.dataCallback=e(b,a),this},setBreadcrumbCallback:function(a){var b=this.k.breadcrumbCallback;return this.k.breadcrumbCallback=e(b,a),this},setShouldSendCallback:function(a){var b=this.k.shouldSendCallback;return this.k.shouldSendCallback=e(b,a),this},setTransport:function(a){return this.k.transport=a,this},lastException:function(){return this.d},lastEventId:function(){return this.f},isSetup:function(){return!!this.a&&(!!this.g||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this.y("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var a=I.RavenConfig;a&&this.config(a.dsn,a.config).install()},showReportDialog:function(a){if(J){a=a||{};var b=a.eventId||this.lastEventId();if(!b)throw new B("Missing eventId");var c=a.dsn||this.E;if(!c)throw new B("Missing DSN");var d=encodeURIComponent,e="";e+="?eventId="+d(b),e+="&dsn="+d(c);var f=a.user||this.j.user;f&&(f.name&&(e+="&name="+d(f.name)),f.email&&(e+="&email="+d(f.email)));var g=this.G(this.D(c)),h=J.createElement("script");h.async=!0,h.src=g+"/api/embed/error-page/"+e,(J.head||J.body).appendChild(h)}},I:function(){var a=this;this.l+=1,setTimeout(function(){a.l-=1})},R:function(a,b){var c,d;if(this.b){b=b||{},a="raven"+a.substr(0,1).toUpperCase()+a.substr(1),J.createEvent?(c=J.createEvent("HTMLEvents"),c.initEvent(a,!0,!0)):(c=J.createEventObject(),c.eventType=a);for(d in b)o(b,d)&&(c[d]=b[d]);if(J.createEvent)J.dispatchEvent(c);else try{J.fireEvent("on"+c.eventType.toLowerCase(),c)}catch(e){}}},S:function(a){var b=this;return function(c){if(b.T=null,b.u!==c){b.u=c;var d;try{d=t(c.target)}catch(e){d="<unknown>"}b.captureBreadcrumb({category:"ui."+a,message:d})}}},U:function(){var a=this,b=1e3;return function(c){var d;try{d=c.target}catch(e){return}var f=d&&d.tagName;if(f&&("INPUT"===f||"TEXTAREA"===f||d.isContentEditable)){var g=a.T;g||a.S("input")(c),clearTimeout(g),a.T=setTimeout(function(){a.T=null},b)}}},V:function(a,b){var c=r(this.v.href),d=r(b),e=r(a);this.w=b,c.protocol===d.protocol&&c.host===d.host&&(b=d.relative),c.protocol===e.protocol&&c.host===e.host&&(a=e.relative),this.captureBreadcrumb({category:"navigation",data:{to:b,from:a}})},A:function(){function a(a){return function(b,d){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];var g=e[0];return h(g)&&(e[0]=c.wrap(g)),a.apply?a.apply(this,e):a(e[0],e[1])}}function b(a){var b=I[a]&&I[a].prototype;b&&b.hasOwnProperty&&b.hasOwnProperty("addEventListener")&&(y(b,"addEventListener",function(b){return function(d,f,g,h){try{f&&f.handleEvent&&(f.handleEvent=c.wrap(f.handleEvent))}catch(i){}var j,k,l;return e&&e.dom&&("EventTarget"===a||"Node"===a)&&(k=c.S("click"),l=c.U(),j=function(a){if(a){var b;try{b=a.type}catch(c){return}return"click"===b?k(a):"keypress"===b?l(a):void 0}}),b.call(this,d,c.wrap(f,void 0,j),g,h)}},d),y(b,"removeEventListener",function(a){return function(b,c,d,e){try{c=c&&(c.K?c.K:c)}catch(f){}return a.call(this,b,c,d,e)}},d))}var c=this,d=c.s,e=this.k.autoBreadcrumbs;y(I,"setTimeout",a,d),y(I,"setInterval",a,d),I.requestAnimationFrame&&y(I,"requestAnimationFrame",function(a){return function(b){return a(c.wrap(b))}},d);for(var f=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],g=0;g<f.length;g++)b(f[g])},B:function(){function a(a,c){a in c&&h(c[a])&&y(c,a,function(a){return b.wrap(a)})}var b=this,c=this.k.autoBreadcrumbs,d=b.s;if(c.xhr&&"XMLHttpRequest"in I){var e=XMLHttpRequest.prototype;y(e,"open",function(a){return function(c,d){return i(d)&&d.indexOf(b.h)===-1&&(this.W={method:c,url:d,status_code:null}),a.apply(this,arguments)}},d),y(e,"send",function(c){return function(d){function e(){if(f.W&&(1===f.readyState||4===f.readyState)){try{f.W.status_code=f.status}catch(a){}b.captureBreadcrumb({type:"http",category:"xhr",data:f.W})}}for(var f=this,g=["onload","onerror","onprogress"],i=0;i<g.length;i++)a(g[i],f);return"onreadystatechange"in f&&h(f.onreadystatechange)?y(f,"onreadystatechange",function(a){return b.wrap(a,void 0,e)}):f.onreadystatechange=e,c.apply(this,arguments)}},d)}c.xhr&&"fetch"in I&&y(I,"fetch",function(a){return function(c,d){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];var g,h=e[0],i="GET";"string"==typeof h?g=h:(g=h.url,h.method&&(i=h.method)),e[1]&&e[1].method&&(i=e[1].method);var j={method:i,url:g,status_code:null};return b.captureBreadcrumb({type:"http",category:"fetch",data:j}),a.apply(this,e).then(function(a){return j.status_code=a.status,a})}},d),c.dom&&this.b&&(J.addEventListener?(J.addEventListener("click",b.S("click"),!1),J.addEventListener("keypress",b.U(),!1)):(J.attachEvent("onclick",b.S("click")),J.attachEvent("onkeypress",b.U())));var f=I.chrome,g=f&&f.app&&f.app.runtime,j=!g&&I.history&&history.pushState;if(c.location&&j){var l=I.onpopstate;I.onpopstate=function(){var a=b.v.href;if(b.V(b.w,a),l)return l.apply(this,arguments)},y(history,"pushState",function(a){return function(){var c=arguments.length>2?arguments[2]:void 0;return c&&b.V(b.w,c+""),a.apply(this,arguments)}},d)}if(c.console&&"console"in I&&console.log){var m=function(a,c){b.captureBreadcrumb({message:a,level:c.level,category:"console"})};k(["debug","info","warn","error","log"],function(a,b){F(console,b,m)})}},M:function(){for(var a;this.s.length;){a=this.s.shift();var b=a[0],c=a[1],d=a[2];b[c]=d}},C:function(){var a=this;k(this.q,function(b,c){var d=c[0],e=c[1];d.apply(a,[a].concat(e))})},D:function(a){var b=H.exec(a),c={},d=7;try{for(;d--;)c[G[d]]=b[d]||""}catch(e){throw new B("Invalid DSN: "+a)}if(c.pass&&!this.k.allowSecretKey)throw new B("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return c},G:function(a){var b="//"+a.host+(a.port?":"+a.port:"");return a.protocol&&(b=a.protocol+":"+b),b},z:function(){this.l||this.N.apply(this,arguments)},N:function(a,b){var c=this.O(a,b);this.R("handle",{stackInfo:a,options:b}),this.X(a.name,a.message,a.url,a.lineno,c,b)},O:function(a,b){var c=this,d=[];if(a.stack&&a.stack.length&&(k(a.stack,function(a,b){var e=c.Y(b);e&&d.push(e)}),b&&b.trimHeadFrames))for(var e=0;e<b.trimHeadFrames&&e<d.length;e++)d[e].in_app=!1;return d=d.slice(0,this.k.stackTraceLimit)},Y:function(a){if(a.url){var b={filename:a.url,lineno:a.line,colno:a.column,"function":a.func||"?"};return b.in_app=!(this.k.includePaths.test&&!this.k.includePaths.test(b.filename)||/(Raven|TraceKit)\./.test(b["function"])||/raven\.(min\.)?js$/.test(b.filename)),b}},X:function(a,b,c,d,e,f){var g;if((!this.k.ignoreErrors.test||!this.k.ignoreErrors.test(b))&&(b+="",e&&e.length?(c=e[0].filename||c,e.reverse(),g={frames:e}):c&&(g={frames:[{filename:c,lineno:d,in_app:!0}]}),(!this.k.ignoreUrls.test||!this.k.ignoreUrls.test(c))&&(!this.k.whitelistUrls.test||this.k.whitelistUrls.test(c)))){var h=l({exception:{values:[{type:a,value:b,stacktrace:g}]},culprit:c},f);this.P(h)}},Z:function(a){var b=this.k.maxMessageLength;if(a.message&&(a.message=n(a.message,b)),a.exception){var c=a.exception.values[0];c.value=n(c.value,b)}var d=a.request;return d&&(d.url&&(d.url=n(d.url,this.k.maxUrlLength)),d.Referer&&(d.Referer=n(d.Referer,this.k.maxUrlLength))),a.breadcrumbs&&a.breadcrumbs.values&&this.$(a.breadcrumbs),a},$:function(a){for(var b,c,d,e=["to","from","url"],f=0;f<a.values.length;++f)if(c=a.values[f],c.hasOwnProperty("data")&&E(c.data)&&!m(c.data)){d=l({},c.data);for(var g=0;g<e.length;++g)b=e[g],d.hasOwnProperty(b)&&(d[b]=n(d[b],this.k.maxUrlLength));a.values[f].data=d}},_:function(){if(this.c||this.b){var a={};return this.c&&K.userAgent&&(a.headers={"User-Agent":navigator.userAgent}),this.b&&(J.location&&J.location.href&&(a.url=J.location.href),J.referrer&&(a.headers||(a.headers={}),a.headers.Referer=J.referrer)),a}},x:function(){this.aa=0,this.ba=null},ca:function(){return this.aa&&d()-this.ba<this.aa},da:function(a){var b=this.e;return!(!b||a.message!==b.message||a.culprit!==b.culprit)&&(a.stacktrace||b.stacktrace?x(a.stacktrace,b.stacktrace):!a.exception&&!b.exception||w(a.exception,b.exception))},ea:function(a){if(!this.ca()){var b=a.status;if(400===b||401===b||429===b){var c;try{c=a.getResponseHeader("Retry-After"),c=1e3*parseInt(c,10)}catch(e){}this.aa=c?c:2*this.aa||1e3,this.ba=d()}}},P:function(a){var b=this.k,c={project:this.i,logger:b.logger,platform:"javascript"},e=this._();if(e&&(c.request=e),a.trimHeadFrames&&delete a.trimHeadFrames,a=l(c,a),a.tags=l(l({},this.j.tags),a.tags),a.extra=l(l({},this.j.extra),a.extra),a.extra["session:duration"]=d()-this.r,this.t&&this.t.length>0&&(a.breadcrumbs={values:[].slice.call(this.t,0)}),j(a.tags)&&delete a.tags,this.j.user&&(a.user=this.j.user),b.environment&&(a.environment=b.environment),b.release&&(a.release=b.release),b.serverName&&(a.server_name=b.serverName),h(b.dataCallback)&&(a=b.dataCallback(a)||a),a&&!j(a)&&(!h(b.shouldSendCallback)||b.shouldSendCallback(a)))return this.ca()?void this.y("warn","Raven dropped error due to backoff: ",a):void("number"==typeof b.sampleRate?Math.random()<b.sampleRate&&this.fa(a):this.fa(a))},ga:function(){return s()},fa:function(a,b){var c=this,d=this.k;if(this.isSetup()){if(this.f=a.event_id||(a.event_id=this.ga()),a=this.Z(a),!this.k.allowDuplicates&&this.da(a))return void this.y("warn","Raven dropped repeat event: ",a);this.e=a,this.y("debug","Raven about to send:",a);var e={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this.h};this.F&&(e.sentry_secret=this.F);var f=a.exception&&a.exception.values[0];this.captureBreadcrumb({category:"sentry",message:f?(f.type?f.type+": ":"")+f.value:a.message,event_id:a.event_id,level:a.level||"error"});var g=this.H;(d.transport||this.ha).call(this,{url:g,auth:e,data:a,options:d,onSuccess:function(){c.x(),c.R("success",{data:a,src:g}),b&&b()},onError:function(d){c.y("error","Raven transport failed to send: ",d),d.request&&c.ea(d.request),c.R("failure",{data:a,src:g}),d=d||new Error("Raven send failed (no additional details provided)"),b&&b(d)}})}},ha:function(a){var b=new XMLHttpRequest,c="withCredentials"in b||"undefined"!=typeof XDomainRequest;if(c){var d=a.url;"withCredentials"in b?b.onreadystatechange=function(){if(4===b.readyState)if(200===b.status)a.onSuccess&&a.onSuccess();else if(a.onError){var c=new Error("Sentry error code: "+b.status);c.request=b,a.onError(c)}}:(b=new XDomainRequest,d=d.replace(/^https?:/,""),a.onSuccess&&(b.onload=a.onSuccess),a.onError&&(b.onerror=function(){var c=new Error("Sentry error code: XDomainRequest");c.request=b,a.onError(c)})),b.open("POST",d+"?"+q(a.auth)),b.send(A(a.data))}},y:function(a){this.p[a]&&this.debug&&Function.prototype.apply.call(this.p[a],this.o,[].slice.call(arguments,1))},Q:function(a,b){g(b)?delete this.j[a]:this.j[a]=l(this.j[a]||{},b)}};var L=Object.prototype;f.prototype.setUser=f.prototype.setUserContext,f.prototype.setReleaseContext=f.prototype.setRelease,b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,2:2,5:5,6:6,7:7}],4:[function(a,b,c){(function(c){"use strict";var d=a(3),e="undefined"!=typeof window?window:"undefined"!=typeof c?c:"undefined"!=typeof self?self:{},f=e.Raven,g=new d;g.noConflict=function(){return e.Raven=f,g},g.afterLoad(),b.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3}],5:[function(a,b,c){"use strict";function d(a){return"object"==typeof a&&null!==a}function e(a){switch({}.toString.call(a)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return a instanceof Error}}function f(a){function b(b,c){var d=a(b)||b;return c?c(d)||d:d}return b}b.exports={isObject:d,isError:e,wrappedCallback:f}},{}],6:[function(a,b,c){(function(c){"use strict";function d(){return"undefined"==typeof document||"undefined"==typeof document.location?"":document.location.href}var e=a(5),f={collectWindowErrors:!0,debug:!1},g="undefined"!=typeof window?window:"undefined"!=typeof c?c:"undefined"!=typeof self?self:{},h=[].slice,i="?",j=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;f.report=function(){function a(a){m(),s.push(a)}function b(a){for(var b=s.length-1;b>=0;--b)s[b]===a&&s.splice(b,1)}function c(){n(),s=[]}function k(a,b){var c=null;if(!b||f.collectWindowErrors){for(var d in s)if(s.hasOwnProperty(d))try{s[d].apply(null,[a].concat(h.call(arguments,2)))}catch(e){c=e}if(c)throw c}}function l(a,b,c,g,h){var l=null;if(v)f.computeStackTrace.augmentStackTraceWithInitialElement(v,b,c,a),o();else if(h&&e.isError(h))l=f.computeStackTrace(h),k(l,!0);else{var m,n={url:b,line:c,column:g},p=void 0,r=a;if("[object String]"==={}.toString.call(a)){var m=a.match(j);m&&(p=m[1],r=m[2])}n.func=i,l={name:p,message:r,url:d(),stack:[n]},k(l,!0)}return!!q&&q.apply(this,arguments)}function m(){r||(q=g.onerror,g.onerror=l,r=!0)}function n(){r&&(g.onerror=q,r=!1,q=void 0)}function o(){var a=v,b=t;t=null,v=null,u=null,k.apply(null,[a,!1].concat(b))}function p(a,b){var c=h.call(arguments,1);if(v){if(u===a)return;o()}var d=f.computeStackTrace(a);if(v=d,u=a,t=c,setTimeout(function(){u===a&&o()},d.incomplete?2e3:0),b!==!1)throw a}var q,r,s=[],t=null,u=null,v=null;return p.subscribe=a,p.unsubscribe=b,p.uninstall=c,p}(),f.computeStackTrace=function(){function a(a){if("undefined"!=typeof a.stack&&a.stack){for(var b,c,e,f=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,g=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,h=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,j=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,k=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=a.stack.split("\n"),m=[],n=(/^(.*) is undefined$/.exec(a.message),0),o=l.length;n<o;++n){if(c=f.exec(l[n])){var p=c[2]&&0===c[2].indexOf("native"),q=c[2]&&0===c[2].indexOf("eval");q&&(b=k.exec(c[2]))&&(c[2]=b[1],c[3]=b[2],c[4]=b[3]),e={url:p?null:c[2],func:c[1]||i,args:p?[c[2]]:[],line:c[3]?+c[3]:null,column:c[4]?+c[4]:null}}else if(c=h.exec(l[n]))e={url:c[2],func:c[1]||i,args:[],line:+c[3],column:c[4]?+c[4]:null};else{if(!(c=g.exec(l[n])))continue;var q=c[3]&&c[3].indexOf(" > eval")>-1;q&&(b=j.exec(c[3]))?(c[3]=b[1],c[4]=b[2],c[5]=null):0!==n||c[5]||"undefined"==typeof a.columnNumber||(m[0].column=a.columnNumber+1),e={url:c[3],func:c[1]||i,args:c[2]?c[2].split(","):[],line:c[4]?+c[4]:null,column:c[5]?+c[5]:null}}!e.func&&e.line&&(e.func=i),m.push(e)}return m.length?{name:a.name,message:a.message,url:d(),stack:m}:null}}function b(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){if(a.incomplete=!1,e.func||(e.func=i),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function c(a,g){for(var h,j,k=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],m={},n=!1,o=c.caller;o&&!n;o=o.caller)if(o!==e&&o!==f.report){if(j={url:null,func:i,line:null,column:null},o.name?j.func=o.name:(h=k.exec(o.toString()))&&(j.func=h[1]),"undefined"==typeof j.func)try{j.func=h.input.substring(0,h.input.indexOf("{"))}catch(p){}m[""+o]?n=!0:m[""+o]=!0,l.push(j)}g&&l.splice(0,g);var q={name:a.name,message:a.message,url:d(),stack:l};return b(q,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),q}function e(b,e){var g=null;e=null==e?0:+e;try{if(g=a(b))return g}catch(h){if(f.debug)throw h}try{if(g=c(b,e+1))return g}catch(h){if(f.debug)throw h}return{name:b.name,message:b.message,url:d()}}return e.augmentStackTraceWithInitialElement=b,e.computeStackTraceFromStackProp=a,e}(),b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5}],7:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function e(a,b,c,d){return JSON.stringify(a,f(b,d),c)}function f(a,b){var c=[],e=[];return null==b&&(b=function(a,b){return c[0]===b?"[Circular ~]":"[Circular ~."+e.slice(0,d(c,b)).join(".")+"]"}),function(f,g){if(c.length>0){var h=d(c,this);~h?c.splice(h+1):c.push(this),~h?e.splice(h,1/0,f):e.push(f),~d(c,g)&&(g=b.call(this,f,g))}else c.push(g);return null==a?g:a.call(this,f,g)}}c=b.exports=e,c.getSerialize=f},{}]},{},[4])(4)});
Raven.config('http://71730cd6f21c4f128f6e941d1e50b5c2@logs.arsh.co/64', {}).install();

function adTimer(t,e,n,i){this.adInterval=setInterval(function(){pausedPreloader||e>=t&&(adTime=++t,n.style.width=100*adTime/e+"%",i&&(pausedPreloader=!0))},800)}function getVPAIDAd(){return new VPAIDVideoPlayer}var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(){var t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];window.console||(window.console={});for(var e=window.console,n=t.length;n--;){var i=t[n];e[i]||(e[i]=function(){})}}();var Utils;!function(t){t.appendStyle=function(t){var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)},t.fadeInFromRight=function(t){if(t)return t.style.display="inline-block",setTimeout(function(){t.style.opacity="1",t.style.marginRight="0"},100),t;console.warn("Trying to fadeInFromRight a null element.")},t.fadeInFromLeft=function(t){if(t)return t.style.display="inline-block",setTimeout(function(){t.style.opacity="1",t.style.marginLeft="40px"},100),t;console.warn("Trying to fadeInFromLeft a null element.")},t.ajax=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i=null);var o=new XMLHttpRequest;i&&o.addEventListener("load",i);var a="";for(var r in n)n.hasOwnProperty(r)&&(a.length>0&&(a+="&"),a+=r+"="+n[r]);o.open(e,t),a.length>0?(o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(a)):o.send()},t.contains=function(t,e){return(t||"").indexOf(e)>=0},t.getQueryParameterByName=function(t,e){if(e||(e=window.location.href),!t)return"";t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}(Utils||(Utils={}));var VPAID;!function(t){var e=function(){function t(){this.adFinished=!1,this.eventCompleteLoading=!1,this.playerWidth=0,this.playerHeight=0}return t.prototype.initAd=function(t,e,n,i,o,a){this.playerWidth=t,this.playerHeight=e,this.parameters_=JSON.parse(o.AdParameters),this.trackers=this.parameters_.trackers||[],this.logAPI=this.parameters_.logAPI,this.isLinear=Utils.contains(this.logAPI,"tp=l"),this.siteToken=Utils.getQueryParameterByName("zone",this.logAPI||""),this.reportMetrics()},t.prototype.handshakeVersion=function(t){return"2.0"},t.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log(t,e)},t.prototype.loadPixel=function(t,e,n){var i=this;if(void 0===e&&(e=null),void 0===n&&(n=!1),!this.ajaxSendEvents||n){var o=document.createElement("img");o.src=t,o.style.display="none",o.addEventListener("load",function(){console.info("event success ... "),i.eventCompleteLoading=!0,e&&e()}),o.addEventListener("error",function(){console.info("event failed ... "),i.eventCompleteLoading=!0,e&&e()}),window.parent.document.firstElementChild.appendChild(o)}else{var a=new XMLHttpRequest;a.open("GET",t),a.send(),a.addEventListener("loadend",function(){console.log("own call event"),console.info("event success ... "),i.eventCompleteLoading=!0,e&&e()})}},t.prototype.logEvent=function(t,e){var n=this;void 0===e&&(e=null),this.adFinished||this.logAPI&&(this.eventCompleteLoading=!1,this.trackers.forEach(function(i){i[0]==t&&n.loadPixel(i[1],e,!0)}),this.loadPixel(this.logAPI.replace("EVENT",t),e))},t.prototype.reportMetrics=function(){var t=this;try{var e=[],n=this.playerWidth||0,i=this.playerHeight||0,o=0;n>=900&&i>=500?o=4:n>=600&&i>=300?o=3:n>=300&&i>=200?o=2:n>=100&&i>=100&&(o=1),function(n){n.d1=t.siteToken,n.d2=t.isLinear?"l":"n",e.push(n)}({name:"player-size",value:o,x1:n,x2:i});"undefined"!=typeof JSON&&JSON.stringify&&Utils.ajax("https://api.vidad.net/monitoring/metrics/report","POST",{metrics:JSON.stringify(e)})}catch(t){console.warn("Exception occurred in reporting metrics")}},t}();t.VPAIDBase=e}(VPAID||(VPAID={}));var VERSION="1.1.0",STATIC_URL="https://static.vidad.net/",adInterval,adTime,preloader,pausedPreloader=!1,VPAIDVideoPlayer=function(t){function e(){var e=t.call(this)||this;return e.skipOffset=5,e.skipEnabled=!1,e.bannerDuration=10,e.banner_timer=0,e.ajaxSendEvents=!0,e.slot_=null,e.videoSlot_=null,e.eventsCallbacks_={},e.AdVideoComplete_event=!1,e.attributes_={companions:"",desiredBitrate:256,duration:30,expanded:!1,height:0,icons:!1,linear:!0,remainingTime:13,skippableState:!1,viewMode:"normal",width:0,volume:1},e.intervalId_=null,e.quartileEvents_=[{event:"AdImpression",value:0},{event:"AdVideoFirstQuartile",value:20},{event:"AdVideoMidpoint",value:45},{event:"AdVideoThirdQuartile",value:70},{event:"AdVideoComplete",value:95}],e.lastQuartileIndex_=0,e.parameters_={},e.elements={},e.isVideo=!1,e.isIframe=!1,e.canSkip=!1,e}return __extends(e,t),e.prototype.applyStyle=function(){Utils.appendStyle("\n          @font-face {\n            font-family: 'IranSans';\n            src: url('https://static.vidad.net/fonts/IranSans/normal-fa.woff2') format('woff2'),\n                 url('https://static.vidad.net/fonts/IranSans/normal-fa.woff') format('woff'),\n                 url('https://static.vidad.net/fonts/IranSans/normal-fa.ttf') format('truetype');\n          }\n          .gifLoader {\n              display: none;\n          }\n          .footPrint{\n            color: #fff;\n            background-color: #000;\n            font-size: 15px;\n            font-family: arial;\n            position: absolute;\n            top: 0;\n            left : 0;\n            padding: 5px;\n            opacity: 0.7;\n            cursor : pointer;\n          }\n          .footPrint::after {\n            content: 'VidAd';\n            background-image: url("+STATIC_URL+"icons/info-circle.png);\n            background-repeat: no-repeat;\n            background-position: 45px 50%;\n            background-size: 15px;\n            color: #d786ff;\n            padding-right: 20px;\n            padding-left: 2px;\n          }\n          .hotspotLink {\n            \n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            bottom: 40px;\n          }\n          .vidad-button {\n            display: block;\n            box-sizing: border-box;\n            color: #333;\n            text-align: center;\n            text-decoration: none;\n            transition: all 0.5s ease-out;\n            font-size: 14px;\n            font-weight: 900;\n            font-family: IranSans, BTitr, Titr, BNazanin, Nazanin, BRoya, Roya, sans-serif;\n            position: absolute;\n            bottom: 3%;\n          }\n          @media screen and (max-width: 480px) {\n              .vidad-button {\n                font-size: 10px;\n                font-weight: 100;\n              }\n              .footPrint{\n                  font-size: 10px;\n              }\n              .footPrint::after {\n                background-position: 34px 50%;\n                background-size: 10px;\n                color: #d786ff;\n                padding-right: 18px;\n                padding-left: 2px;\n              }\n              .vidad-button.adBtn.skipAd {\n                  padding-left : 100px;\n              }\n              .hotspotLink {\n                  bottom: 35px;\n              }\n              .sideBarElements {\n                  height: 40px;\n              }\n              .vidad-button.adBtn.specialSale::after {\n                background-size: 12px;  \n              }\n              .vidad-button.adBtn.skipAd:after{\n                background-size: 10px !important;\n              }\n          }\n          .vidad-button.resume-btn {\n            width: 100px;\n            height: 100px; \n            left: 50%;\n            position: absolute;\n            margin-left: -50px !important;\n            background : rgba(0,0,0,0.3);\n            top: 50%;\n            margin-top: -50px;\n            border-radius: 50%;\n          }\n          .vidad-button.resume-btn::before{\n            content: \"\";\n            width: 0;\n            height: 0;\n            border-top: 20px solid transparent;\n            border-bottom: 20px solid transparent;\n            border-left: 30px solid #fff;\n            position: absolute;\n            top: 50%;\n            margin-top: -20px;\n            right: 50%;\n            margin-right: -20px;\n          }\n          .jw-vpaid-wrapper.resume-ad {\n              background-color : rgba(0, 0, 0, 0.59);\n          }\n          .vidad-button.adBtn {\n            color: #fff;\n            text-decoration: none;\n            margin: 0 5px;\n          }\n          .vidad-button.adBtn::before {\n            content: ' ';\n            border-radius: 50% 0% 0% 0;\n            position: absolute;\n            left: -25px;\n            top: 0;\n            padding: 0 20px;\n            z-index : -1;\n            bottom: 0;\n          }\n          .vidad-button.adBtn::after {\n            content: ' ';\n            border-radius: 0% 50% 50% 0;\n            position: absolute;\n            right: -25px;\n            top: 0;\n            padding: 0 20px;\n            z-index : -1;\n            bottom: 0;\n          }\n          \n          .vidad-button.adBtn.skipAd {\n            right : 35px;\n            padding-left: 150px;\n          }\n          .vidad-button.adBtn.skipAd:after {\n            background-image : url("+STATIC_URL+"icons/arrow-right.png);\n            background-repeat : no-repeat;\n            background-size : 14px;\n            background-position : 20px 50%;\n          }\n          .vidad-button.adBtn.specialSale {\n            margin-left: 50px;\n            left : 0px;\n          }\n          \n          .vidad-button.adBtn.specialSale::after {\n              \n            background-image : url("+STATIC_URL+"icons/link-external.png);\n            background-repeat : no-repeat;\n            background-position : 20px 50%;\n          }\n          .vidad-button.adBtn.specialSale:hover,\n          .vidad-button.adBtn.specialSale:focus,\n          .vidad-button.adBtn.specialSale:active {\n            background: ##2d9019;\n            transition: all 0.9s ease-in;\n          }\n          .vidad-button:focus {\n            outline: none;\n          }\n          \n          .v-logo {\n            width: 90px;\n            z-index: -2;\n            float : left;\n            position: absolute;\n            bottom : 0;\n          }\n          \n          .v-banner {\n            display: inline-block;\n            box-sizing: border-box;\n            width: 100%;\n            width: 100vw;\n            height: 100%;\n            height: 100vh;\n            padding-bottom: 5.5%;\n            padding-bottom: 5.5vh;\n            z-index: 100;\n            background-color: #000;\n          }\n          \n          .sidebar {\n            position: absolute;\n            right: 0px;\n            left : 0px;\n            top: 0;\n            bottom: 0;\n            width: 100%;\n            height : 100%;\n            max-width: 100%;\n            // padding-top: 25px;\n            // padding-top: 20vh;\n            z-index: 101;\n            \n          }\n          .sideBarElements {\n            width: 100%;\n            height: 60px;\n            background: rgba(71,71,71,0);\n            background: -moz-linear-gradient(top, rgba(71,71,71,0) 0%, rgba(38,38,38,0.6) 35%, rgba(0,0,0,1) 70%, rgba(0,0,0,1) 100%);\n            background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(71,71,71,0)), color-stop(35%, rgba(38,38,38,0.6)), color-stop(70%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,1)));\n            background: -webkit-linear-gradient(top, rgba(71,71,71,0) 0%, rgba(38,38,38,0.6) 35%, rgba(0,0,0,1) 70%, rgba(0,0,0,1) 100%);\n            background: -o-linear-gradient(top, rgba(71,71,71,0) 0%, rgba(38,38,38,0.6) 35%, rgba(0,0,0,1) 70%, rgba(0,0,0,1) 100%);\n            background: -ms-linear-gradient(top, rgba(71,71,71,0) 0%, rgba(38,38,38,0.6) 35%, rgba(0,0,0,1) 70%, rgba(0,0,0,1) 100%);\n            background: linear-gradient(to bottom, rgba(71,71,71,0) 0%, rgba(38,38,38,0.6) 35%, rgba(0,0,0,1) 70%, rgba(0,0,0,1) 100%);\n            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#474747', endColorstr='#000000', GradientType=0 );\n            position: absolute;\n            bottom: 0;\n          }\n          .preloader {\n              width : 0;\n              height: 5px;\n              position: absolute;\n              bottom: 0;\n              left: 0;\n              display: block;\n              background: #fc0;\n              transition: width 0.8s linear;\n          }\n          .v-iframe {\n            width: 300px;\n            height: 300px;\n            top: 50%;\n            left: 50%;\n            position: absolute;\n            margin-top: -150px;\n            margin-left: -150px;\n          }\n          .black_frame {\n              width: 100vw;\n              height: 100vh;\n              background-color: #FFF;\n              position: absolute;\n              top:0;\n              left:0;\n              z-index: -1;\n          }\n        ")},e.prototype.createDivAd=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var o=document.createElement("div");return o.className="hotspotLink",o.addEventListener("click",e,!1),this.sidebarEl.appendChild(o),o},e.prototype.createVidAdButton=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var o=document.createElement("a");return o.className="vidad-button",o.href="#",o.text=t,o.addEventListener("click",e,!1),o.style.opacity="0",i?o.style.marginRight="-100px":o.style.marginLeft="-100px",this.sidebarEl.appendChild(o),n?o.style.display="none":i?Utils.fadeInFromRight(o):Utils.fadeInFromLeft(o),o},e.prototype.createLogo=function(t){var e=this;if(!t)return null;var n=document.createElement("img");return n.src=t,n.className="v-logo",n.addEventListener("click",function(t){t.preventDefault(),e.clickAd()},!1),n},e.prototype.createPreloader=function(t){void 0===t&&(t=!0);var e=document.createElement("div");return e.className="preloader",e.style.width="0",pausedPreloader=!1,e.style.display=t?"none":"block",this.sidebarEl.appendChild(e),e},e.prototype.createVidadFootPrint=function(t,e){var n=document.createElement("span");return n.innerText=e||"Ad By VidAd",n.className="footPrint",n.addEventListener("click",t,!1),this.sidebarEl.appendChild(n),n},e.prototype.createGUI=function(){var t=this;this.sidebarEl=document.createElement("div"),this.sidebarEl.className="sidebar",this.gradientParent=document.createElement("div"),this.gradientParent.className="sideBarElements",this.slot_.appendChild(this.sidebarEl),this.slot_.appendChild(this.gradientParent),this.createLogo(this.parameters_.logo),this.elements.hotspotArea=this.createDivAd("",function(e){e.preventDefault(),t.clickAd()}),this.elements.clickBtn=this.createVidAdButton(this.parameters_.bannerCaption||"اطلاعات بیشتر",function(e){e.preventDefault(),t.clickAd()}),this.elements.vidAdFootPrint=this.createVidadFootPrint(function(e){t.clickVidAd()},"Ads by"),this.elements.clickBtn.className+=" adBtn specialSale",this.elements.skipBtn=this.createVidAdButton(this.parameters_.bannerSkipCaption||"رد کردن تبلیغ",function(e){e.preventDefault(),t.logEvent("skip",function(){t.stopAd(),t.callEvent_("AdSkipped")})},!0,!0),this.elements.skipBtn.className+=" adBtn skipAd",this.elements.preloader=this.createPreloader(!1),preloader=this.elements.preloader;var e,n=this.isVideo;if(n){i=0;(e=this.videoSlot_.duration)&&adTimer(i,e,preloader,n)}else{var i=0;(e=this.bannerDuration)&&adTimer(i,e,preloader,n)}},e.prototype.initAd=function(e,n,i,o,a,r){var s=this;t.prototype.initAd.call(this,e,n,i,o,a,r),this.attributes_.width=e,this.attributes_.height=n,this.attributes_.viewMode=i,this.attributes_.desiredBitrate=o,this.slot_=r.slot,this.videoSlot_=r.videoSlot,this.isVideo=Boolean(this.parameters_.isVideo),this.isIframe=-1!==this.parameters_.banner.indexOf("iframe"),this.canSkip=Boolean(this.parameters_.canSkip),this.clickThrough=this.parameters_.clickThrough,this.vidadLivk=this.parameters_.vidad_link||"http://vidad.net/?utm_source=preroll&utm_campaign=adsbutton&utm_medium=adsbutton",this.bannerDuration=this.parameters_.bannerDuration||10,this.log("initAd "+e+"x"+n+" "+i+" "+o),this.applyStyle(),this.isVideo&&(this.updateVideoSlot_(),this.logEvent("imp"),this.videoSlot_.addEventListener("timeupdate",this.timeUpdateHandler_.bind(this),!1),this.videoSlot_.addEventListener("ended",this.stopAd.bind(this),!1),this.videoSlot_.addEventListener("loadeddata",function(){s.videoLoaded()})),this.subscribe(function(){s.logEvent("start")},"AdImpression"),this.subscribe(function(){s.logEvent("q1")},"AdVideoFirstQuartile"),this.subscribe(function(){s.logEvent("q2")},"AdVideoMidpoint"),this.subscribe(function(){s.logEvent("q3")},"AdVideoThirdQuartile"),this.subscribe(function(){s.logEvent("q4")},"AdVideoComplete"),this.callEvent_("AdLoaded")},e.prototype.timeUpdateHandler_=function(){this.adFinished||(this.attributes_.remainingTime=this.videoSlot_.duration-this.videoSlot_.currentTime,pausedPreloader=!1,this.canSkip&&!this.skipEnabled&&this.videoSlot_.currentTime>=this.skipOffset&&this.enableSkip(),this.attributes_.duration!=this.videoSlot_.duration&&(this.attributes_.duration=this.videoSlot_.duration,this.callEvent_("AdDurationChange")),this.send_Quartile_events(this.videoSlot_.currentTime,this.videoSlot_.duration))},e.prototype.send_Quartile_events=function(t,e,n){if(void 0===n&&(n=!0),this.lastQuartileIndex_>=this.quartileEvents_.length)this.adFinished=!0;else{var i=100*t/e;if(i>=this.quartileEvents_[this.lastQuartileIndex_].value){var o=this.quartileEvents_[this.lastQuartileIndex_].event;this.callEvent_(o),this.lastQuartileIndex_+=1}!this.isVideo&&i>=80&&(this.AdVideoComplete_event||(console.log("I am calling last event"),this.callEvent_("AdVideoComplete")))}},e.prototype.videoLoaded=function(){this.createGUI(),this.startAd.bind(this)},e.prototype.updateVideoSlot_=function(){null==this.videoSlot_&&(this.videoSlot_=document.createElement("video"),this.log("Warning: No video element passed to ad, creating element."),this.slot_.appendChild(this.videoSlot_));for(var t=!1,e=[{url:this.parameters_.banner,mimetype:"video/mp4"}],n=0;n<e.length;n++)if(""!=this.videoSlot_.canPlayType(e[n].mimetype)){this.videoSlot_.setAttribute("src",e[n].url),t=!0;break}t||this.callEvent_("AdError")},e.prototype.updateVideoPlayerSize_=function(){try{this.videoSlot_.setAttribute("width",this.attributes_.width),this.videoSlot_.setAttribute("height",this.attributes_.height),this.videoSlot_.style.width=this.attributes_.width+"px",this.videoSlot_.style.height=this.attributes_.height+"px"}catch(t){}},e.prototype.createBanner=function(){var t=this,e=document.createElement("img");return e.src=this.parameters_.banner,e.className="v-banner",e.addEventListener("load",function(){t.logEvent("imp"),t.createGUI(),t.callEvent_("AdStarted"),t.bannerTimer()},!1),this.slot_.appendChild(e),e},e.prototype.bannerTimer=function(){var t=this;this.banner_timer<this.bannerDuration?this.banner_interval=setInterval(function(){t.banner_timer+=1,t.send_Quartile_events(t.banner_timer,t.bannerDuration)},1e3):clearInterval(this.banner_interval)},e.prototype.startAd=function(){var t=this,e=this.bannerDuration;this.isVideo?this.videoSlot_.play():this.isIframe?(this.createIframe(),this.bannerAdTimeOutStop=setTimeout(function(){console.info("banner ad ended , stopping proccess started ..."),t.stopAd()},1e3*e),this.canSkip&&setTimeout(function(){t.enableSkip()},1e3*this.skipOffset)):(this.createBanner(),this.bannerAdTimeOutStop=setTimeout(function(){console.info("banner ad ended , stopping proccess started ..."),t.stopAd()},1e3*e),this.canSkip&&setTimeout(function(){t.enableSkip()},1e3*this.skipOffset)),this.callEvent_("AdStarted")},e.prototype.createIframe=function(){var t=this,e=document.createElement("iframe"),n=document.createElement("div");return n.className="black_frame",n.addEventListener("click",function(){t.clickAd()}),this.slot_.appendChild(n),e.src=this.parameters_.banner,e.className="v-iframe",e.frameBorder="0",e.scrolling="no",e.onload=function(){t.logEvent("imp"),t.createGUI(),t.callEvent_("AdStarted"),t.bannerTimer(),t.slot_.style.textAlign="center"},this.slot_.appendChild(e),e},e.prototype.enableSkip=function(){this.skipEnabled=!0,Utils.fadeInFromRight(this.elements.skipBtn)},e.prototype.stopAd=function(){var t=this;this.log("Stopping ad"),this.intervalId_&&clearInterval(this.intervalId_),console.log(this.eventCompleteLoading);var e=setInterval(function(){if(console.log("stop ad proccess start ----------------"),t.eventCompleteLoading){console.log("stop ad proccess success ----------------");var n=t.callEvent_.bind(t);setTimeout(n,75,["AdStopped"]),clearInterval(e)}else console.log("stop ad proccess failed ----------------")},30);setTimeout(function(){t.eventCompleteLoading=!0},400),setTimeout(function(){t.adFinished=!0},25)},e.prototype.setAdVolume=function(t){this.attributes_.volume=t,this.videoSlot_.volume=t/100,this.callEvent_("AdVolumeChange")},e.prototype.getAdVolume=function(){return this.attributes_.volume},e.prototype.resizeAd=function(t,e,n){this.attributes_.width=t,this.attributes_.height=e,this.attributes_.viewMode=n,this.updateVideoPlayerSize_(),this.callEvent_("AdSizeChange")},e.prototype.pauseAd=function(t){var e=this;if(void 0===t&&(t=!1),this.bannerAdTimeOutStop&&clearTimeout(this.bannerAdTimeOutStop),this.videoSlot_.pause(),this.callEvent_("AdPaused"),this.intervalId_&&clearInterval(this.intervalId_),!this.elements.resumeBtn){pausedPreloader=!0;var n=this.slot_;n.className+=" resume-ad",this.elements.resumeBtn=this.createVidAdButton("",function(i){if(i.preventDefault(),n.classList.remove("resume-ad"),t)e.stopAd();else{e.resumeAd();var o=e.elements.resumeBtn;o&&(o.opacity="0",o.parentNode.removeChild(o),e.elements.resumeBtn=null)}}),this.elements.resumeBtn.className+=" resume-btn"}},e.prototype.resumeAd=function(){this.videoSlot_.play(),this.callEvent_("AdPlaying");var t=function(){this.attributes_.remainingTime-=.25,this.callEvent_("AdRemainingTimeChange")}.bind(this);this.intervalId_=setInterval(t,250)},e.prototype.expandAd=function(){},e.prototype.getAdExpanded=function(){return this.attributes_.expanded},e.prototype.getAdSkippableState=function(){return this.attributes_.skippableState},e.prototype.collapseAd=function(){this.attributes_.expanded=!1},e.prototype.skipAd=function(){this.attributes_.skippableState&&(console.info("ad skipped ..."),this.callEvent_("AdSkipped"))},e.prototype.clickAd=function(){this.clickThrough?(this.logEvent("lclick"),clearInterval(this.banner_interval),this.callEvent_("AdClickThru"),this.pauseAd(!0),window.open(this.clickThrough,"_blank")):this.log("No clickThrough provided, click ignored.")},e.prototype.clickVidAd=function(){this.vidadLivk?(this.logEvent("lclick"),this.callEvent_("vidAdLink"),this.pauseAd(!0),window.open(this.vidadLivk,"_blank")):this.log("No clickThrough provided, click ignored.")},e.prototype.subscribe=function(t,e,n){void 0===n&&(n=null);var i;i=n?t.bind(n):t,this.eventsCallbacks_[e]=i},e.prototype.unsubscribe=function(t){void 0!==this.eventsCallbacks_&&(this.eventsCallbacks_[t]=null)},e.prototype.getAdWidth=function(){return this.attributes_.width},e.prototype.getAdHeight=function(){return this.attributes_.height},e.prototype.getAdRemainingTime=function(){return this.attributes_.remainingTime},e.prototype.getAdDuration=function(){return this.attributes_.duration},e.prototype.getAdCompanions=function(){return this.attributes_.companions},e.prototype.getAdIcons=function(){return this.attributes_.icons},e.prototype.getAdLinear=function(){return this.attributes_.linear},e.prototype.callEvent_=function(t){t in this.eventsCallbacks_&&(this.eventsCallbacks_[t](),"AdVideoComplete"===t&&(this.AdVideoComplete_event=!0))},e}(VPAID.VPAIDBase);
